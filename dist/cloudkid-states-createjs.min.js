!function(){"use strict";var t=cloudkid.Animator,n=(cloudkid.PixiAnimator,cloudkid.StateManager),i=function(t){this.initialize(t)},e=i.prototype;e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher&&createjs.EventDispatcher.initialize(e),e.stateId=null,e.manager=null,e.panel=null,e._destroyed=!1,e._active=!1,e._isLoading=!1,e._canceled=!1,e._onEnterStateProceed=null,e._onLoadingComplete=null,e._enabled=!1,e._isTransitioning=!1,e.initialize=function(t){this.panel=t},e.getCanceled=function(){return this._canceled},e._internalExitState=function(){if(this._isTransitioning){this._isTransitioning=!1;var n=t;n.stop(this.panel)}this._enabled=!1,this.panel.visible=!1,this._active=!1,this.exitState()},e.exitState=function(){},e._internalExitStateStart=function(){this.exitStateStart()},e.exitStateStart=function(){},e._internalEnterState=function(n){if(this._isTransitioning){this._isTransitioning=!1;var i=t;i.stop(this.panel)}this._enabled=!1,this._active=!0,this._canceled=!1,this._onEnterStateProceed=n,this.enterState(),this._onEnterStateProceed&&(this._onEnterStateProceed(),this._onEnterStateProceed=null)},e.loadingStart=function(){return this._isLoading?void Debug.warn("loadingStart() was called while we're already loading"):(this._isLoading=!0,this.manager.loadingStart(),this._onLoadingComplete=this._onEnterStateProceed,void(this._onEnterStateProceed=null))},e.loadingDone=function(){return this._isLoading?(this._isLoading=!1,this.manager.loadingDone(),void(this._onLoadingComplete&&(this._onLoadingComplete(),this._onLoadingComplete=null))):void Debug.warn("loadingDone() was called without a load started, call loadingStart() first")},e._internalCancel=function(){this._active=!1,this._canceled=!0,this._isLoading=!1,this._internalExitState(),this.cancel()},e.cancel=function(){},e.enterState=function(){},e._internalEnterStateDone=function(){this._canceled||(this.setEnabled(!0),this.enterStateDone())},e.enterStateDone=function(){},e.update=function(){},e.getActive=function(){return this._active},e.transitionIn=function(i){this._isTransitioning=!0;var e=this,a=t;a.play(this.panel,n.TRANSITION_IN,function(){e._isTransitioning=!1,i()})},e.transitionOut=function(i){this._enabled=!1,this._isTransitioning=!0;var e=this,a=t;a.play(this.panel,n.TRANSITION_OUT,function(){e._isTransitioning=!1,i()})},e.getDestroyed=function(){return this._destroyed},e.setEnabled=function(t){this._enabled=t},e.getEnabled=function(){return this._enabled},e.destroy=function(){this.exitState(),this.panel=null,this.manager=null,this._destroyed=!0,this._onEnterStateProceed=null,this._onLoadingComplete=null},namespace("cloudkid").BaseState=i}(),function(t){"use strict";var n=function(t,n,i){this.initialize(t,n,i)},i=n.prototype;n.TRANSITION_IN="onTransitionStateIn",n.TRANSITION_IN_DONE="onTransitionStateInDone",n.TRANSITION_OUT="onTransitionStateOut",n.TRANSITION_OUT_DONE="onTransitionStateOutDone",n.VISIBLE="onVisible",n.HIDDEN="onHidden",i.currentState=null,i.visibleState=null,i.type=null,i.initialize=function(n,i,e){this.type=n,this.visibleState=e===t?i:e,this.currentState=i},namespace("cloudkid").StateEvent=n}(),function(t){"use strict";var n=cloudkid.Audio||cloudkid.Sound,i=cloudkid.OS,e=cloudkid.Animator,a=(cloudkid.BaseState,cloudkid.PixiAnimator,cloudkid.StateEvent),s=createjs.EventDispatcher,o=(createjs.MovieClip,createjs.Touch);StateManager=function(t,n){this.initialize(t,n)};var r=StateManager.prototype;r.addEventListener=null,r.removeEventListener=null,r.removeAllEventListeners=null,r.dispatchEvent=null,r.hasEventListener=null,r._listeners=null,s&&s.initialize(r),StateManager.VERSION="1.1.3",r._transition=null,r._transitionSounds=null,r._states=null,r._state=null,r._stateId=null,r._oldState=null,r._isLoading=!1,r._isTransitioning=!1,r._destroyed=!1,r._queueStateId=null,StateManager.TRANSITION_IN="onTransitionIn",StateManager.TRANSITION_IN_DONE="onTransitionInDone",StateManager.TRANSITION_OUT="onTransitionOut",StateManager.TRANSITION_OUT_DONE="onTransitionOutDone",StateManager.DIALOG_SHOW="onBlockerShow",StateManager.DIALOG_SHOW_DONE="onBlockerShowDone",StateManager.DIALOG_HIDE="onBlockerHide",StateManager.DIALOG_HIDE_DONE="onBlockerHideDone",StateManager.TRANSITION_INIT="onInit",StateManager.TRANSITION_INIT_DONE="onInitDone",StateManager.LOADING_START="onLoadingStart",StateManager.LOADING_DONE="onLoadingDone",r.initialize=function(t,n){this._transition=t,this._transition.stop(),this.hideBlocker(),this._states={},this._transitionSounds=n||null,this._loopTransition=this._loopTransition.bind(this)},r.addState=function(t,n){this._states[t]=n,n.stateId=t,n.manager=this,n._internalExitState()},r.changeTransition=function(t){this._transition=t},r.getState=function(){return this._stateId},r.getCurrentState=function(){return this._state},r.getStateById=function(n){return Debug.assert(this._states[n]!==t,"No alias matching "+n),this._states[n]},r.isBusy=function(){return this._isLoading||this._isTransitioning},r.loadingStart=function(){this._destroyed||this.dispatchEvent(StateManager.LOADING_START)},r.loadingDone=function(){this._destroyed||this.dispatchEvent(StateManager.LOADING_DONE)},r.showBlocker=function(){var t=i.instance.stage;t.enableMouseOver(!1),t.enableDOMEvents(!1),o.disable(t)},r.hideBlocker=function(){var t=i.instance,n=t.stage;n.enableMouseOver(t.options.mouseOverRate),n.enableDOMEvents(!0),o.enable(n)},r.refresh=function(){Debug.assert(!!this._state,"No current state to refresh!"),this.setState(this._stateId)},r.setState=function(n){if(Debug.assert(this._states[n]!==t,"No current state mattching id '"+n+"'"),this._isTransitioning)return void(this._queueStateId=n);this._stateId=n,this.showBlocker(),this._oldState=this._state,this._state=this._states[n];var i;this._oldState?this._isLoading?(this._oldState._internalCancel(),this._isLoading=!1,this._state._internalEnterState(this._onStateLoaded)):(this._isTransitioning=!0,this._oldState._internalExitStateStart(),i=this,this.dispatchEvent(new a(a.TRANSITION_OUT,this._state,this._oldState)),this._oldState.transitionOut(function(){i.dispatchEvent(new a(a.TRANSITION_OUT_DONE,i._state,i._oldState)),i.dispatchEvent(StateManager.TRANSITION_OUT),i._transitioning(StateManager.TRANSITION_OUT,function(){i.dispatchEvent(StateManager.TRANSITION_OUT_DONE),i._isTransitioning=!1,i.dispatchEvent(new a(a.HIDDEN,i._state,i._oldState)),i._oldState.panel.visible=!1,i._oldState._internalExitState(),i._oldState=null,i._loopTransition(),i._processQueue()||(i._isLoading=!0,i._state._internalEnterState(i._onStateLoaded.bind(i)))})})):(this._isTransitioning=!0,this._transition.visible=!0,i=this,this._loopTransition(),i.dispatchEvent(StateManager.TRANSITION_INIT_DONE),i._isLoading=!0,i._state._internalEnterState(i._onStateLoaded.bind(i)))},r._onStateLoaded=function(){this._isLoading=!1,this._isTransitioning=!0,this.dispatchEvent(new a(a.VISIBLE,this._state)),this._state.panel.visible=!0,this.dispatchEvent(StateManager.TRANSITION_IN);var t=this;this._transitioning(StateManager.TRANSITION_IN,function(){t._transition.visible=!1,t.dispatchEvent(StateManager.TRANSITION_IN_DONE),t.dispatchEvent(new a(a.TRANSITION_IN,t._state)),t._state.transitionIn(function(){t.dispatchEvent(new a(a.TRANSITION_IN_DONE,t._state)),t._isTransitioning=!1,t.hideBlocker(),t._processQueue()||t._state._internalEnterStateDone()})})},r._processQueue=function(){if(this._queueStateId){var t=this._queueStateId;return this._queueStateId=null,this.setState(t),!0}return!1},r._loopTransition=function(){var t;this._transitionSounds&&(t=this._transitionSounds.loop,n.instance.soundLoaded===!1&&(t=null)),e.instanceHasAnimation(this._transition,"transitionLoop")&&e.play(this._transition,"transitionLoop",this._loopTransition,null,null,null,t)},r.showTransitionOut=function(t){this.showBlocker();var n=this,i=function(){n._loopTransition(),t&&t()};this._transitioning(StateManager.TRANSITION_OUT,i)},r.showTransitionIn=function(t){var n=this;this._transitioning(StateManager.TRANSITION_IN,function(){n.hideBlocker(),t&&t()})},r._transitioning=function(t,i){var a=this._transition;a.visible=!0;var s;this._transitionSounds&&(s=t==StateManager.TRANSITION_IN?this._transitionSounds.in:this._transitionSounds.out,n.instance.soundLoaded===!1&&(s=null)),e.play(this._transition,t,i,null,null,null,s)},r.update=function(t){this._state&&this._state.update(t)},r.destroy=function(){if(this._destroyed=!0,e.stop(this._transition),this._transition=null,this._state=null,this._oldState=null,this._states)for(var t in this._states)this._states[t].destroy(),delete this._states[t];this._states=null},namespace("cloudkid").StateManager=StateManager}();